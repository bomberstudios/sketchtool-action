name: SketchTool Extract

on:
  push:
    branches:
    - master
    paths:
    - '**.sketch'

jobs:
  assets:
    runs-on: macOS-latest
    steps:
    - uses: actions/checkout@v1
    - name: Download & Install Sketch
      run: |
        curl -O https://download.sketchapp.com/sketch-60.1-88133.zip
        unzip sketch-60.1-88133.zip
    - name: Run SketchTool
      run: Sketch.app/Contents/Resources/sketchtool/bin/sketchtool export layers sample-document.sketch
    - name: Update assets in assets folder
        uses: stefanzweifel/git-auto-commit-action@v2.3.0
        with:
          commit_message: Update assets
          branch: master
          # Optional git params
          commit_options: '--no-verify --signoff'
          # Optional glob pattern of files which should be added to the commit
          file_pattern: assets/\*
        env:
          GITHUB_TOKEN: ${{ secrets.GITHUB_TOKEN }}